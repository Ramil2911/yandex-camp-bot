# ะะธะบัะพัะตัะฒะธัะฝะฐั ะฐััะธัะตะบัััะฐ Telegram ะฑะพัะฐ

ะัะพะตะบั ะฟัะตะดััะฐะฒะปัะตั ัะพะฑะพะน Telegram ะฑะพัะฐ ั RAG-ัะธััะตะผะพะน, ัะฐะทะดะตะปะตะฝะฝัะน ะฝะฐ ะฝะตะทะฐะฒะธัะธะผัะต ะผะธะบัะพัะตัะฒะธัั ั ะพะฑัะธะผะธ ะบะพะผะฟะพะฝะตะฝัะฐะผะธ.

## ะััะธัะตะบัััะฐ

```
โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ
โ   API Gateway   โโโโโโ  Telegram Bot   โ
โ    (Port 8000)  โ    โโโโโโโโโโโโโโโโโโโ
โโโโโโโโโโโโโโโโโโโ
          โ
    โโโโโโโผโโโโโโโโโโโโโโโโโโโโโโ
    โ     โ                     โ
    โผ     โผ                     โผ
โโโโโโโโโโโโโโโ โโโโโโโโโโโโโโโ โโโโโโโโโโโโโโโ
โ  Security   โ โ     RAG     โ โ  Dialogue   โ
โ  Service    โ โ   Service   โ โ  Service   โ
โ  (Port 8001)โ โ  (Port 8002)โ โ  (Port 8003)โ
โโโโโโโโโโโโโโโ โโโโโโโโโโโโโโโ โโโโโโโโโโโโโโโ
    โ     โ                     โ
    โโโโโโโผโโโโโโโโโโโโโโโโโโโโโโ
          โผ
    โโโโโโโโโโโโโโโ
    โ Monitoring  โ
    โ   Service   โ
    โ  (Port 8004)โ
    โโโโโโโโโโโโโโโ
          โ
          โผ
    โโโโโโโโโโโโโโโ
    โ   Common    โ
    โ Components  โ
    โโโโโโโโโโโโโโโ
```

## ะกะตัะฒะธัั

### 1. API Gateway Service
**ะะพัั:** 8000
- **ะคัะฝะบัะธั:** ะัะพะดะฝะฐั ัะพัะบะฐ, ะผะฐัััััะธะทะฐัะธั ะทะฐะฟัะพัะพะฒ
- **ะขะตัะฝะพะปะพะณะธะธ:** FastAPI, python-telegram-bot

### 2. Security Service
**ะะพัั:** 8001
- **ะคัะฝะบัะธั:** ะะพะดะตัะฐัะธั ะธ ะฑะตะทะพะฟะฐัะฝะพััั ะทะฐะฟัะพัะพะฒ
- **ะขะตัะฝะพะปะพะณะธะธ:** FastAPI, YandexGPT, ัะฒัะธััะธะบะธ

### 3. RAG Service
**ะะพัั:** 8002
- **ะคัะฝะบัะธั:** ะะพะธัะบ ะธ ะธะทะฒะปะตัะตะฝะธะต ะธะฝัะพัะผะฐัะธะธ ะธะท ะดะพะบัะผะตะฝัะพะฒ
- **ะขะตัะฝะพะปะพะณะธะธ:** FastAPI, ChromaDB, LangChain, Sentence Transformers

### 4. Dialogue Service
**ะะพัั:** 8003
- **ะคัะฝะบัะธั:** ะะธะฐะปะพะณะพะฒัะน ะะ ั ะฟะพะดะดะตัะถะบะพะน ะบะพะฝัะตะบััะฐ
- **ะขะตัะฝะพะปะพะณะธะธ:** FastAPI, LangChain, YandexGPT

### 5. Monitoring Service
**ะะพัั:** 8004
- **ะคัะฝะบัะธั:** ะฆะตะฝััะฐะปะธะทะพะฒะฐะฝะฝะพะต ะปะพะณะธัะพะฒะฐะฝะธะต ะธ ะผะพะฝะธัะพัะธะฝะณ ะฒัะตั ัะตัะฒะธัะพะฒ
- **ะขะตัะฝะพะปะพะณะธะธ:** FastAPI, PostgreSQL, SQLAlchemy
- **ะะฐะทะฐ ะดะฐะฝะฝัั:** PostgreSQL ะดะปั ััะฐะฝะตะฝะธั ะปะพะณะพะฒ, ะผะตััะธะบ ะธ ััะฐัะธััะธะบะธ

### 6. ะัะฟะพะผะพะณะฐัะตะปัะฝัะต ัะตัะฒะธัั

#### PostgreSQL Database
**ะะพัั:** 5432
- **ะคัะฝะบัะธั:** ะฅัะฐะฝะตะฝะธะต ะปะพะณะพะฒ ะธ ะผะตััะธะบ ะพั ะฒัะตั ัะตัะฒะธัะพะฒ
- **ะะฐะทะฝะฐัะตะฝะธะต:** Monitoring Service ัะพััะฐะฝัะตั ััะดะฐ ะฒัะต ะปะพะณะธ, ะผะตััะธะบะธ ะฟัะพะธะทะฒะพะดะธัะตะปัะฝะพััะธ ะธ ััะฐัะธััะธะบั ะธัะฟะพะปัะทะพะฒะฐะฝะธั

#### Redis
**ะะพัั:** 6379
- **ะคัะฝะบัะธั:** ะะตัะธัะพะฒะฐะฝะธะต ะธ ััะฐะฝะตะฝะธะต ัะตััะธะน
- **ะะฐะทะฝะฐัะตะฝะธะต:** ะััััะพะต ััะฐะฝะตะฝะธะต ะฒัะตะผะตะฝะฝัั ะดะฐะฝะฝัั ะธ ัะพััะพัะฝะธะน

### 7. Common Components
**ะคัะฝะบัะธั:** ะะฑัะธะต ะบะพะผะฟะพะฝะตะฝัั ะดะปั ะฒัะตั ัะตัะฒะธัะพะฒ
- **LLM Base:** ะะฐะทะพะฒัะน ะบะปะฐัั ะดะปั ะฒัะตั LLM ะบะพะผะฟะพะฝะตะฝัะพะฒ
- **Common Models:** ะะฑัะธะต ะผะพะดะตะปะธ ะดะฐะฝะฝัั (LogEntry, HealthCheckResponse)
- **Utils:** ะฃัะธะปะธัั ะดะปั ะปะพะณะธัะพะฒะฐะฝะธั ะธ HTTP ะฒะทะฐะธะผะพะดะตะนััะฒะธั
- **Config:** ะะฑัะธะต ะฝะฐัััะพะนะบะธ

## ะัััััะน ะทะฐะฟััะบ

1. **ะะฐัััะพะนะบะฐ ะฟะตัะตะผะตะฝะฝัั ะพะบััะถะตะฝะธั:**
```bash
cp env.example .env
# ะััะตะดะฐะบัะธััะนัะต .env ัะฐะนะป ั ะฒะฐัะธะผะธ API ะบะปััะฐะผะธ
```

2. **ะะฐะฟััะบ ะฒัะตั ัะตัะฒะธัะพะฒ:**
```bash
docker-compose up --build
```

3. **ะะปะธ ะทะฐะฟััะบ ะพัะดะตะปัะฝัั ัะตัะฒะธัะพะฒ:**
```bash
# API Gateway
cd api-gateway && pip install -r requirements.txt && uvicorn app.main:app --port 8000

# Security Service
cd security-service && pip install -r requirements.txt && uvicorn app.main:app --port 8001

# RAG Service
cd rag-service && pip install -r requirements.txt && uvicorn app.main:app --port 8002

# Dialogue Service
cd dialogue-service && pip install -r requirements.txt && uvicorn app.main:app --port 8003

# Monitoring Service
cd monitoring-service && pip install -r requirements.txt && uvicorn app.main:app --port 8004
```

## ะะพะฝัะธะณััะฐัะธั

### ะะฑัะทะฐัะตะปัะฝัะต ะฟะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั:

```bash
# API ะบะปััะธ
YC_OPENAI_TOKEN=your_yandex_openai_token_here
YC_FOLDER_ID=your_yandex_folder_id_here
TG_BOT_TOKEN=your_telegram_bot_token_here

# ะะฐะทะฐ ะดะฐะฝะฝัั PostgreSQL
POSTGRES_DB=monitoring           # ะะผั ะฑะฐะทั ะดะฐะฝะฝัั ะดะปั ะปะพะณะพะฒ ะธ ะผะตััะธะบ
POSTGRES_USER=user               # ะะพะปัะทะพะฒะฐัะตะปั ะฑะฐะทั ะดะฐะฝะฝัั
POSTGRES_PASSWORD=password       # ะะฐัะพะปั ะฟะพะปัะทะพะฒะฐัะตะปั ะฑะฐะทั ะดะฐะฝะฝัั
DATABASE_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@db:5432/${POSTGRES_DB}
```

#### ๐ **ะะตะทะพะฟะฐัะฝะพััั ะบัะตะดะพะฒ PostgreSQL:**

- **`POSTGRES_USER`** ะธ **`POSTGRES_PASSWORD`** ะธัะฟะพะปัะทััััั ะดะปั ะฐััะตะฝัะธัะธะบะฐัะธะธ ะฒ ะฑะฐะทะต ะดะฐะฝะฝัั
- ะญัะธ ะบัะตะดั **ะฝะต ะดะพะปะถะฝั** ัะพะฒะฟะฐะดะฐัั ั ะฒะฐัะธะผะธ ัะตะฐะปัะฝัะผะธ ััะตัะฝัะผะธ ะดะฐะฝะฝัะผะธ
- ะ ะฟัะพะดะฐะบัะตะฝะต ะธัะฟะพะปัะทัะนัะต **ัะธะปัะฝัะต, ัะฝะธะบะฐะปัะฝัะต ะฟะฐัะพะปะธ**
- DATABASE_URL ะฐะฒัะพะผะฐัะธัะตัะบะธ ัะพัะผะธััะตััั ะธะท ะพัะดะตะปัะฝัั ะฟะตัะตะผะตะฝะฝัั

### ะกัััะบัััะฐ ะดะฐะฝะฝัั:

```
microservices/
โโโ api-gateway/          # API Gateway Service
โโโ security-service/     # Security Service
โโโ rag-service/          # RAG Service
โโโ dialogue-service/     # Dialogue Service
โโโ monitoring-service/   # Monitoring Service
โโโ docker-compose.yml    # ะัะบะตัััะฐัะธั
โโโ env.example          # ะัะธะผะตั ะบะพะฝัะธะณััะฐัะธะธ
โโโ README.md            # ะญัะฐ ะดะพะบัะผะตะฝัะฐัะธั
```

## ะะพะฝะธัะพัะธะฝะณ ะธ ะปะพะณะธัะพะฒะฐะฝะธะต

- ะัะต ัะตัะฒะธัั ะพัะฟัะฐะฒะปััั ะปะพะณะธ ะฒ Monitoring Service
- ะะพัััะฟะฝะฐ ะฟะฐะฝะตะปั ะทะดะพัะพะฒัั: `GET /health` ะฝะฐ ะบะฐะถะดะพะผ ัะตัะฒะธัะต
- ะกัะฐัะธััะธะบะฐ ะดะพัััะฟะฝะฐ ะฟะพ `GET /stats`

## ะะฐัััะฐะฑะธััะตะผะพััั

- ะะฐะถะดัะน ัะตัะฒะธั ะผะพะถะตั ะฑััั ะผะฐัััะฐะฑะธัะพะฒะฐะฝ ะฝะตะทะฐะฒะธัะธะผะพ
- ะัะฟะพะปัะทัะตััั HTTP ะดะปั ะผะตะถัะตัะฒะธัะฝะพะณะพ ะฒะทะฐะธะผะพะดะตะนััะฒะธั
- ะะพัะพะฒะฐ ะบ ัะฐะทะฒะตัััะฒะฐะฝะธั ะฒ Kubernetes

## ะะตะทะพะฟะฐัะฝะพััั

- ะะฝะพะณะพััะพะฒะฝะตะฒะฐั ัะธััะตะผะฐ ะฑะตะทะพะฟะฐัะฝะพััะธ
- ะญะฒัะธััะธัะตัะบะฐั ัะธะปัััะฐัะธั + LLM-ะผะพะดะตัะฐัะธั
- ะะพะณะธัะพะฒะฐะฝะธะต ะฒัะตั ะดะตะนััะฒะธะน ะฟะพะปัะทะพะฒะฐัะตะปะตะน

## ะะฐะทัะฐะฑะพัะบะฐ

ะะปั ะดะพะฑะฐะฒะปะตะฝะธั ะฝะพะฒะพะณะพ ััะฝะบัะธะพะฝะฐะปะฐ:

1. ะกะพะทะดะฐะนัะต ะพัะดะตะปัะฝัะน ัะตัะฒะธั ะตัะปะธ ััะฝะบัะธั ะฝะตะทะฐะฒะธัะธะผะฐ
2. ะะพะฑะฐะฒััะต endpoints ะฒ ัััะตััะฒัััะธะต ัะตัะฒะธัั ะตัะปะธ ััะฝะบัะธั ัะฒัะทะฐะฝะฐ
3. ะะฑะฝะพะฒะธัะต docker-compose.yml
4. ะะพะฑะฐะฒััะต ะฟะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั ะฒ env.example
